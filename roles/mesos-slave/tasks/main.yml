---

- name: /usr/bin/docker run -it -d --name={{role_name}} -e TZ=Europe/Riga --restart=always --privileged -v /tmp/mesos:/var/log/mesos -v /tmp/mesos:/var/tmp/mesos -v /var/run/docker.sock:/var/run/docker.sock -v /cgroup:/cgroup -v /sys:/sys --name=mesos-slave --net=container:tinc -e MESOS_MASTER=zk://10.0.0.8:2181,10.0.0.12:2181,10.0.0.14:2181,10.0.0.15:2181/mesos -e LIBPROCESS_ADVERTISE_IP={{tinc_ip}} -e LIBPROCESS_IP={{tinc_ip}} -e MESOS_IP={{tinc_ip}} -e MESOS_LAUNCHER=posix -e MESOS_PORT=5051 -e MESOS_SWITCH_USER=0 -e MESOS_CONTAINERIZERS=mesos,docker -e MESOS_LOG_DIR=/var/log/mesos -e MESOS_WORK_DIR=/var/tmp/mesos mesosphere/mesos-slave:1.5.0 --no-hostname_lookup --no-systemd_enable_support
  command: /usr/bin/docker run -it -d --name=mesos-slave -e TZ=Europe/Riga --restart=always --privileged -v /tmp/mesos:/var/log/mesos -v /tmp/mesos:/var/tmp/mesos -v /var/run/docker.sock:/var/run/docker.sock -v /cgroup:/cgroup -v /sys:/sys --name=mesos-slave --net=container:tinc -e MESOS_MASTER=zk://10.0.0.8:2181,10.0.0.12:2181,10.0.0.14:2181,10.0.0.15:2181/mesos -e LIBPROCESS_ADVERTISE_IP={{tinc_ip}} -e LIBPROCESS_IP={{tinc_ip}} -e MESOS_IP={{tinc_ip}} -e MESOS_LAUNCHER=posix -e MESOS_PORT=5051 -e MESOS_SWITCH_USER=0 -e MESOS_CONTAINERIZERS=mesos,docker -e MESOS_LOG_DIR=/var/log/mesos -e MESOS_WORK_DIR=/var/tmp/mesos mesosphere/mesos-slave:1.5.0 --no-hostname_lookup --no-systemd_enable_support
  when: (ansible_distribution == 'Container Linux by CoreOS')

